var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function c(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function a(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function h(){return f(" ")}function d(t,e,n,c){return t.addEventListener(e,n,c),()=>t.removeEventListener(e,n,c)}function p(t){return function(e){return e.preventDefault(),t.call(this,e)}}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e,n){const c=new Set;for(let e=0;e<t.length;e+=1)t[e].checked&&c.add(t[e].__value);return n||c.delete(e),Array.from(c)}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}function v(t,e,n){t.classList[n?"add":"remove"](e)}class b{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,n=null){this.e||(this.e=a(e.nodeName),this.t=e,this.h(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)l(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(i)}}let w;function y(t){w=t}const k=[],x=[],S=[],O=[],q=Promise.resolve();let A=!1;function j(t){S.push(t)}let E=!1;const N=new Set;function C(){if(!E){E=!0;do{for(let t=0;t<k.length;t+=1){const e=k[t];y(e),L(e.$$)}for(y(null),k.length=0;x.length;)x.pop()();for(let t=0;t<S.length;t+=1){const e=S[t];N.has(e)||(N.add(e),e())}S.length=0}while(k.length);for(;O.length;)O.pop()();A=!1,E=!1,N.clear()}}function L(t){if(null!==t.fragment){t.update(),c(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}const J=new Set;function M(t,e){t&&t.i&&(J.delete(t),t.i(e))}function z(t,n,r,s){const{fragment:l,on_mount:i,on_destroy:u,after_update:a}=t.$$;l&&l.m(n,r),s||j((()=>{const n=i.map(e).filter(o);u?u.push(...n):c(n),t.$$.on_mount=[]})),a.forEach(j)}function I(t,e){const n=t.$$;null!==n.fragment&&(c(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function T(t,e){-1===t.$$.dirty[0]&&(k.push(t),A||(A=!0,q.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function B(e,o,r,s,l,u,a=[-1]){const f=w;y(e);const h=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:o.context||[]),callbacks:n(),dirty:a,skip_bound:!1};let d=!1;if(h.ctx=r?r(e,o.props||{},((t,n,...c)=>{const o=c.length?c[0]:n;return h.ctx&&l(h.ctx[t],h.ctx[t]=o)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](o),d&&T(e,t)),n})):[],h.update(),d=!0,c(h.before_update),h.fragment=!!s&&s(h.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);h.fragment&&h.fragment.l(t),t.forEach(i)}else h.fragment&&h.fragment.c();o.intro&&M(e.$$.fragment),z(e,o.target,o.anchor,o.customElement),C()}y(f)}class D{$destroy(){I(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function R(t,e,n){const c=t.slice();return c[10]=e[n],c[11]=e,c[12]=n,c}function U(t,e,n){const c=t.slice();return c[13]=e[n],c[15]=n,c}function H(t){let e,n;return{c(){e=a("img"),e.src!==(n=t[10].img_link)&&g(e,"src",n),g(e,"alt","無法顯示圖片"),g(e,"class","svelte-12qzhp3")},m(t,n){l(t,e,n)},p(t,c){1&c&&e.src!==(n=t[10].img_link)&&g(e,"src",n)},d(t){t&&i(e)}}}function P(t){let e,n,c,o,r,u,f=t[10].choices[t[13]].text+"";function p(){t[8].call(n,t[11],t[12])}return t[9][0][t[12]]=[],{c(){e=a("label"),n=a("input"),c=h(),g(n,"type","radio"),n.__value=t[15],n.value=n.__value,t[9][0][t[12]].push(n),o=new b(null),g(e,"class","svelte-12qzhp3"),v(e,"showing","currentAnswer"in t[10]),v(e,"correct",t[10].choices[t[13]].is_correct),v(e,"incorrect",!t[10].choices[t[13]].is_correct)},m(i,a){l(i,e,a),s(e,n),n.checked=n.__value===t[10].currentAnswer,s(e,c),o.m(f,e),r||(u=d(n,"change",p),r=!0)},p(c,r){t=c,1&r&&(n.checked=n.__value===t[10].currentAnswer),1&r&&f!==(f=t[10].choices[t[13]].text+"")&&o.p(f),1&r&&v(e,"showing","currentAnswer"in t[10]),1&r&&v(e,"correct",t[10].choices[t[13]].is_correct),1&r&&v(e,"incorrect",!t[10].choices[t[13]].is_correct)},d(c){c&&i(e),t[9][0][t[12]].splice(t[9][0][t[12]].indexOf(n),1),r=!1,u()}}}function F(t){let e,n,o,r,p,m,v,b,w,y,k,x,S,O,q,A,j,E=t[10].session+"",N=t[10].no+"",C=t[10].question+"";function L(){t[6].call(v,t[11],t[12])}function J(){return t[7](t[10],t[11],t[12])}let M=t[10].img_link&&H(t),z=t[10].choicesOrder,I=[];for(let e=0;e<z.length;e+=1)I[e]=P(U(t,z,e));return{c(){e=a("div"),n=a("p"),o=f(E),r=f(" 第"),p=f(N),m=f("題 "),v=a("input"),b=h(),w=a("button"),w.textContent="Clear answer",y=h(),k=a("p"),x=f(C),S=h(),M&&M.c(),O=h();for(let t=0;t<I.length;t+=1)I[t].c();q=h(),g(w,"class","svelte-12qzhp3"),g(e,"class","svelte-12qzhp3")},m(c,i){l(c,e,i),s(e,n),s(n,o),s(n,r),s(n,p),s(n,m),s(n,v),$(v,t[10].tagString),s(e,b),s(e,w),s(e,y),s(e,k),s(k,x),s(e,S),M&&M.m(e,null),s(e,O);for(let t=0;t<I.length;t+=1)I[t].m(e,null);s(e,q),A||(j=[d(v,"input",L),d(w,"click",J)],A=!0)},p(n,c){if(t=n,1&c&&E!==(E=t[10].session+"")&&_(o,E),1&c&&N!==(N=t[10].no+"")&&_(p,N),1&c&&v.value!==t[10].tagString&&$(v,t[10].tagString),1&c&&C!==(C=t[10].question+"")&&_(x,C),t[10].img_link?M?M.p(t,c):(M=H(t),M.c(),M.m(e,O)):M&&(M.d(1),M=null),1&c){let n;for(z=t[10].choicesOrder,n=0;n<z.length;n+=1){const o=U(t,z,n);I[n]?I[n].p(o,c):(I[n]=P(o),I[n].c(),I[n].m(e,q))}for(;n<I.length;n+=1)I[n].d(1);I.length=z.length}},d(t){t&&i(e),M&&M.d(),u(I,t),A=!1,c(j)}}}function G(e){let n,c,o,r,g,m,$,v,b,w,y,k,x,S,O,q=e[0].length+"",A=e[0],j=[];for(let t=0;t<A.length;t+=1)j[t]=F(R(e,A,t));return{c(){n=a("main"),c=a("form"),o=a("p"),r=f("共"),g=f(q),m=f("題，已作答"),$=f(e[1]),v=f("題，答對"),b=f(e[2]),w=f(" ("),y=f(e[3]),k=f("%)"),x=h();for(let t=0;t<j.length;t+=1)j[t].c()},m(t,i){l(t,n,i),s(n,c),s(c,o),s(o,r),s(o,g),s(o,m),s(o,$),s(o,v),s(o,b),s(o,w),s(o,y),s(o,k),s(c,x);for(let t=0;t<j.length;t+=1)j[t].m(c,null);S||(O=d(c,"submit",p(e[5])),S=!0)},p(t,[e]){if(1&e&&q!==(q=t[0].length+"")&&_(g,q),2&e&&_($,t[1]),4&e&&_(b,t[2]),8&e&&_(y,t[3]),1&e){let n;for(A=t[0],n=0;n<A.length;n+=1){const o=R(t,A,n);j[n]?j[n].p(o,e):(j[n]=F(o),j[n].c(),j[n].m(c,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=A.length}},i:t,o:t,d(t){t&&i(n),u(j,t),S=!1,O()}}}function K(t,e,n){let c,o,r,s,{questions:l}=e;return t.$$set=t=>{"questions"in t&&n(0,l=t.questions)},t.$$.update=()=>{1&t.$$.dirty&&n(4,c=l.filter((t=>"currentAnswer"in t))),16&t.$$.dirty&&n(1,o=c.length),16&t.$$.dirty&&n(2,r=c.filter((t=>t.choices[t.currentAnswer].is_correct)).length),6&t.$$.dirty&&n(3,s=0==o?0:Math.round(100*r/o))},[l,o,r,s,c,function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t(e)))}(t,e)},function(t,e){t[e].tagString=this.value,n(0,l)},(t,e,c)=>{delete t.currentAnswer,n(0,e[c]=t,l)},function(t,e){t[e].currentAnswer=this.__value,n(0,l)},[[]]]}class Q extends D{constructor(t){super(),B(this,t,K,G,r,{questions:0})}}function V(t){for(var e,n,c=t.length;0!==c;)n=Math.floor(Math.random()*c),e=t[c-=1],t[c]=t[n],t[n]=e;return t}function W(t,e,n){const c=t.slice();return c[19]=e[n],c}function X(t,e,n){const c=t.slice();return c[22]=e[n],c}function Y(t){let e,n,c,o,r,u,p,m,$=t[22]+"";return{c(){e=a("label"),n=a("input"),o=h(),r=f($),u=h(),g(n,"type","checkbox"),n.__value=c=t[22],n.value=n.__value,t[13][1].push(n),g(e,"class","svelte-wrup1t")},m(c,i){l(c,e,i),s(e,n),n.checked=~t[2].indexOf(n.__value),s(e,o),s(e,r),s(e,u),p||(m=d(n,"change",t[12]),p=!0)},p(t,e){1&e&&c!==(c=t[22])&&(n.__value=c,n.value=n.__value),4&e&&(n.checked=~t[2].indexOf(n.__value)),1&e&&$!==($=t[22]+"")&&_(r,$)},d(c){c&&i(e),t[13][1].splice(t[13][1].indexOf(n),1),p=!1,m()}}}function Z(t){let e,n,c,o,r,u,p,m,$=t[19]+"";return{c(){e=a("label"),n=a("input"),o=h(),r=f($),u=h(),g(n,"type","checkbox"),n.__value=c=t[19],n.value=n.__value,t[13][0].push(n)},m(c,i){l(c,e,i),s(e,n),n.checked=~t[3].indexOf(n.__value),s(e,o),s(e,r),s(e,u),p||(m=d(n,"change",t[14]),p=!0)},p(t,e){2&e&&c!==(c=t[19])&&(n.__value=c,n.value=n.__value),8&e&&(n.checked=~t[3].indexOf(n.__value)),2&e&&$!==($=t[19]+"")&&_(r,$)},d(c){c&&i(e),t[13][0].splice(t[13][0].indexOf(n),1),p=!1,m()}}}function tt(t){let e,n,o,r,m,_,v,b,w,y,k,x,S,O,q,A,j,E,N,C,L,T,B,D,R,U,H,P,F,G,K,V=t[0],tt=[];for(let e=0;e<V.length;e+=1)tt[e]=Y(X(t,V,e));let et=t[1],nt=[];for(let e=0;e<et.length;e+=1)nt[e]=Z(W(t,et,e));return P=new Q({props:{questions:t[4]}}),{c(){e=a("main"),n=a("h1"),n.textContent="二階國考題庫",o=h(),r=a("form"),m=a("div");for(let t=0;t<tt.length;t+=1)tt[t].c();_=h(),v=a("div");for(let t=0;t<nt.length;t+=1)nt[t].c();var t;b=h(),w=a("div"),y=a("button"),y.textContent="Start",k=h(),x=a("label"),S=a("input"),O=f("\n        隨機排序題目"),q=h(),A=a("label"),j=a("input"),E=f("\n        隨機排序答案"),N=h(),C=a("div"),L=a("button"),L.textContent="Download JSON",T=h(),B=a("div"),D=a("input"),R=h(),U=a("button"),U.textContent="Import JSON",H=h(),(t=P.$$.fragment)&&t.c(),g(n,"class","svelte-wrup1t"),g(m,"class","tags-list svelte-wrup1t"),g(y,"type","submit"),g(y,"class","svelte-wrup1t"),g(S,"type","checkbox"),g(j,"type","checkbox"),g(L,"class","svelte-wrup1t"),g(D,"type","textarea"),g(U,"class","svelte-wrup1t"),g(r,"class","question-selection svelte-wrup1t"),g(e,"class","svelte-wrup1t")},m(c,i){l(c,e,i),s(e,n),s(e,o),s(e,r),s(r,m);for(let t=0;t<tt.length;t+=1)tt[t].m(m,null);s(r,_),s(r,v);for(let t=0;t<nt.length;t+=1)nt[t].m(v,null);s(r,b),s(r,w),s(w,y),s(w,k),s(w,x),s(x,S),S.checked=t[5],s(x,O),s(w,q),s(w,A),s(A,j),j.checked=t[6],s(A,E),s(r,N),s(r,C),s(C,L),s(C,T),s(C,B),s(B,D),$(D,t[7]),s(B,R),s(B,U),s(e,H),z(P,e,null),F=!0,G||(K=[d(S,"change",t[15]),d(j,"change",t[16]),d(L,"click",p(t[9])),d(D,"input",t[17]),d(U,"click",p(t[10])),d(r,"submit",p(t[8]))],G=!0)},p(t,[e]){if(5&e){let n;for(V=t[0],n=0;n<V.length;n+=1){const c=X(t,V,n);tt[n]?tt[n].p(c,e):(tt[n]=Y(c),tt[n].c(),tt[n].m(m,null))}for(;n<tt.length;n+=1)tt[n].d(1);tt.length=V.length}if(10&e){let n;for(et=t[1],n=0;n<et.length;n+=1){const c=W(t,et,n);nt[n]?nt[n].p(c,e):(nt[n]=Z(c),nt[n].c(),nt[n].m(v,null))}for(;n<nt.length;n+=1)nt[n].d(1);nt.length=et.length}32&e&&(S.checked=t[5]),64&e&&(j.checked=t[6]),128&e&&$(D,t[7]);const n={};16&e&&(n.questions=t[4]),P.$set(n)},i(t){F||(M(P.$$.fragment,t),F=!0)},o(t){!function(t,e,n,c){if(t&&t.o){if(J.has(t))return;J.add(t),(void 0).c.push((()=>{J.delete(t),c&&(n&&t.d(1),c())})),t.o(e)}}(P.$$.fragment,t),F=!1},d(t){t&&i(e),u(tt,t),u(nt,t),I(P),G=!1,c(K)}}}function et(t,e,n){let c,o,r=[],s=[],l=[],i=[],u=!1,a=!1;fetch("./qbank.json").then((t=>t.json())).then((function(t){n(11,r=t),r.map((function(t){t.tagString=t.subject}))}));let f="";const h=[[],[]];return t.$$.update=()=>{2048&t.$$.dirty&&n(0,c=[...new Set(r.map((t=>t.tagString.split(" "))).flat())]),2048&t.$$.dirty&&n(1,o=[...new Set(r.map((t=>t.session)))])},[c,o,s,l,i,u,a,f,function(){n(4,i=function(t){const{tagsSelected:e,sessionsSelected:n}=t;return console.log(`tags (${e})`),console.log(`sessions (${n})`),r.filter((t=>e.some((e=>t.tagString.includes(e))))).filter((t=>n.includes(t.session))).sort(((t,e)=>parseInt(t.no)>parseInt(e.no)))}({tagsSelected:s,sessionsSelected:l})),u&&V(i),n(4,i=i.map((t=>(t.choicesOrder=[...Array(t.choices.length).keys()],a&&V(t.choicesOrder),console.log(t.choicesOrder),t))))},function(){let t=JSON.parse(JSON.stringify(r));t=t.map((function(t){return delete t.subject,delete t.currentAnswer,delete t.choicesOrder,t})),t=t.map((function(t){return t.tagString=t.tagString.toLowerCase(),t})),function(t,e){const n=new Blob([e],{type:"text/json"}),c=document.createElement("a");c.download=t,c.href=window.URL.createObjectURL(n),c.dataset.downloadurl=["text/json",c.download,c.href].join(":");const o=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});c.dispatchEvent(o),c.remove()}("qbank.json",JSON.stringify(t))},function(){let t=JSON.parse(f);t.map((function(t){t.tagString=t.subject})),n(11,r=r.concat(t))},r,function(){s=m(h[1],this.__value,this.checked),n(2,s)},h,function(){l=m(h[0],this.__value,this.checked),n(3,l)},function(){u=this.checked,n(5,u)},function(){a=this.checked,n(6,a)},function(){f=this.value,n(7,f)}]}return new class extends D{constructor(t){super(),B(this,t,et,tt,r,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
