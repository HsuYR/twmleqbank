var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function c(t){t.forEach(e)}function o(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode.removeChild(t)}function u(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function a(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function f(){return h(" ")}function d(t,e,n,c){return t.addEventListener(e,n,c),()=>t.removeEventListener(e,n,c)}function p(t){return function(e){return e.preventDefault(),t.call(this,e)}}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e,n){const c=new Set;for(let e=0;e<t.length;e+=1)t[e].checked&&c.add(t[e].__value);return n||c.delete(e),Array.from(c)}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function v(t,e){t.value=null==e?"":e}function $(t,e,n){t.classList[n?"add":"remove"](e)}class b{constructor(t=null){this.a=t,this.e=this.n=null}m(t,e,n=null){this.e||(this.e=a(e.nodeName),this.t=e,this.h(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)l(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(i)}}let k;function w(t){k=t}const x=[],y=[],S=[],A=[],O=Promise.resolve();let q=!1;function C(t){S.push(t)}let E=!1;const j=new Set;function N(){if(!E){E=!0;do{for(let t=0;t<x.length;t+=1){const e=x[t];w(e),J(e.$$)}for(w(null),x.length=0;y.length;)y.pop()();for(let t=0;t<S.length;t+=1){const e=S[t];j.has(e)||(j.add(e),e())}S.length=0}while(x.length);for(;A.length;)A.pop()();q=!1,E=!1,j.clear()}}function J(t){if(null!==t.fragment){t.update(),c(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const L=new Set;function M(t,e){t&&t.i&&(L.delete(t),t.i(e))}function z(t,n,r,s){const{fragment:l,on_mount:i,on_destroy:u,after_update:a}=t.$$;l&&l.m(n,r),s||C((()=>{const n=i.map(e).filter(o);u?u.push(...n):c(n),t.$$.on_mount=[]})),a.forEach(C)}function T(t,e){const n=t.$$;null!==n.fragment&&(c(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function B(t,e){-1===t.$$.dirty[0]&&(x.push(t),q||(q=!0,O.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(e,o,r,s,l,u,a=[-1]){const h=k;w(e);const f=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(h?h.$$.context:o.context||[]),callbacks:n(),dirty:a,skip_bound:!1};let d=!1;if(f.ctx=r?r(e,o.props||{},((t,n,...c)=>{const o=c.length?c[0]:n;return f.ctx&&l(f.ctx[t],f.ctx[t]=o)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](o),d&&B(e,t)),n})):[],f.update(),d=!0,c(f.before_update),f.fragment=!!s&&s(f.ctx),o.target){if(o.hydrate){const t=function(t){return Array.from(t.childNodes)}(o.target);f.fragment&&f.fragment.l(t),t.forEach(i)}else f.fragment&&f.fragment.c();o.intro&&M(e.$$.fragment),z(e,o.target,o.anchor,o.customElement),N()}w(h)}class I{$destroy(){T(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function P(t,e,n){const c=t.slice();return c[10]=e[n],c[11]=e,c[12]=n,c}function R(t,e,n){const c=t.slice();return c[13]=e[n],c}function U(t){let e,n;return{c(){e=a("img"),e.src!==(n=t[10].img_link)&&g(e,"src",n),g(e,"alt","無法顯示圖片"),g(e,"class","svelte-12qzhp3")},m(t,n){l(t,e,n)},p(t,c){1&c&&e.src!==(n=t[10].img_link)&&g(e,"src",n)},d(t){t&&i(e)}}}function H(t){let e,n,c,o,r,u,h,p=t[10].choices[t[13]].text+"";function m(){t[8].call(n,t[11],t[12])}return t[9][0][t[12]]=[],{c(){e=a("label"),n=a("input"),o=f(),g(n,"type","radio"),n.__value=c=t[13],n.value=n.__value,t[9][0][t[12]].push(n),r=new b(null),g(e,"class","svelte-12qzhp3"),$(e,"showing","currentAnswer"in t[10]),$(e,"correct",t[10].choices[t[13]].is_correct),$(e,"incorrect",!t[10].choices[t[13]].is_correct)},m(c,i){l(c,e,i),s(e,n),n.checked=n.__value===t[10].currentAnswer,s(e,o),r.m(p,e),u||(h=d(n,"change",m),u=!0)},p(o,s){t=o,1&s&&c!==(c=t[13])&&(n.__value=c,n.value=n.__value),1&s&&(n.checked=n.__value===t[10].currentAnswer),1&s&&p!==(p=t[10].choices[t[13]].text+"")&&r.p(p),1&s&&$(e,"showing","currentAnswer"in t[10]),1&s&&$(e,"correct",t[10].choices[t[13]].is_correct),1&s&&$(e,"incorrect",!t[10].choices[t[13]].is_correct)},d(c){c&&i(e),t[9][0][t[12]].splice(t[9][0][t[12]].indexOf(n),1),u=!1,h()}}}function F(t){let e,n,o,r,p,m,$,b,k,w,x,y,S,A,O,q,C,E=t[10].session+"",j=t[10].no+"",N=t[10].question+"";function J(){t[6].call($,t[11],t[12])}function L(){return t[7](t[10],t[11],t[12])}let M=t[10].img_link&&U(t),z=t[10].choicesOrder,T=[];for(let e=0;e<z.length;e+=1)T[e]=H(R(t,z,e));return{c(){e=a("div"),n=a("p"),o=h(E),r=h(" 第"),p=h(j),m=h("題 \n              "),$=a("input"),b=f(),k=a("button"),k.textContent="Clear answer",w=f(),x=a("p"),y=h(N),S=f(),M&&M.c(),A=f();for(let t=0;t<T.length;t+=1)T[t].c();O=f(),g(k,"class","svelte-12qzhp3"),g(e,"class","svelte-12qzhp3")},m(c,i){l(c,e,i),s(e,n),s(n,o),s(n,r),s(n,p),s(n,m),s(n,$),v($,t[10].tagString),s(n,b),s(n,k),s(e,w),s(e,x),s(x,y),s(e,S),M&&M.m(e,null),s(e,A);for(let t=0;t<T.length;t+=1)T[t].m(e,null);s(e,O),q||(C=[d($,"input",J),d(k,"click",L)],q=!0)},p(n,c){if(t=n,1&c&&E!==(E=t[10].session+"")&&_(o,E),1&c&&j!==(j=t[10].no+"")&&_(p,j),1&c&&$.value!==t[10].tagString&&v($,t[10].tagString),1&c&&N!==(N=t[10].question+"")&&_(y,N),t[10].img_link?M?M.p(t,c):(M=U(t),M.c(),M.m(e,A)):M&&(M.d(1),M=null),1&c){let n;for(z=t[10].choicesOrder,n=0;n<z.length;n+=1){const o=R(t,z,n);T[n]?T[n].p(o,c):(T[n]=H(o),T[n].c(),T[n].m(e,O))}for(;n<T.length;n+=1)T[n].d(1);T.length=z.length}},d(t){t&&i(e),M&&M.d(),u(T,t),q=!1,c(C)}}}function G(e){let n,c,o,r,g,m,v,$,b,k,w,x,y,S,A,O=e[0].length+"",q=e[0],C=[];for(let t=0;t<q.length;t+=1)C[t]=F(P(e,q,t));return{c(){n=a("main"),c=a("form"),o=a("p"),r=h("共"),g=h(O),m=h("題，已作答"),v=h(e[1]),$=h("題，答對"),b=h(e[2]),k=h(" ("),w=h(e[3]),x=h("%)"),y=f();for(let t=0;t<C.length;t+=1)C[t].c()},m(t,i){l(t,n,i),s(n,c),s(c,o),s(o,r),s(o,g),s(o,m),s(o,v),s(o,$),s(o,b),s(o,k),s(o,w),s(o,x),s(c,y);for(let t=0;t<C.length;t+=1)C[t].m(c,null);S||(A=d(c,"submit",p(e[5])),S=!0)},p(t,[e]){if(1&e&&O!==(O=t[0].length+"")&&_(g,O),2&e&&_(v,t[1]),4&e&&_(b,t[2]),8&e&&_(w,t[3]),1&e){let n;for(q=t[0],n=0;n<q.length;n+=1){const o=P(t,q,n);C[n]?C[n].p(o,e):(C[n]=F(o),C[n].c(),C[n].m(c,null))}for(;n<C.length;n+=1)C[n].d(1);C.length=q.length}},i:t,o:t,d(t){t&&i(n),u(C,t),S=!1,A()}}}function K(t,e,n){let c,o,r,s,{questions:l}=e;return t.$$set=t=>{"questions"in t&&n(0,l=t.questions)},t.$$.update=()=>{1&t.$$.dirty&&n(4,c=l.filter((t=>"currentAnswer"in t))),16&t.$$.dirty&&n(1,o=c.length),16&t.$$.dirty&&n(2,r=c.filter((t=>t.choices[t.currentAnswer].is_correct)).length),6&t.$$.dirty&&n(3,s=0==o?0:Math.round(100*r/o))},[l,o,r,s,c,function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t(e)))}(t,e)},function(t,e){t[e].tagString=this.value,n(0,l)},(t,e,c)=>{delete t.currentAnswer,n(0,e[c]=t,l)},function(t,e){t[e].currentAnswer=this.__value,n(0,l)},[[]]]}class Q extends I{constructor(t){super(),D(this,t,K,G,r,{questions:0})}}function V(t){for(var e,n,c=t.length;0!==c;)n=Math.floor(Math.random()*c),e=t[c-=1],t[c]=t[n],t[n]=e;return t}function W(t,e,n){const c=t.slice();return c[21]=e[n],c}function X(t,e,n){const c=t.slice();return c[24]=e[n],c}function Y(t){let e,n,c,o,r,u,p,m,v=t[24]+"";return{c(){e=a("label"),n=a("input"),o=f(),r=h(v),u=f(),g(n,"type","checkbox"),n.__value=c=t[24],n.value=n.__value,t[15][1].push(n),g(e,"class","svelte-1320eoh")},m(c,i){l(c,e,i),s(e,n),n.checked=~t[2].indexOf(n.__value),s(e,o),s(e,r),s(e,u),p||(m=d(n,"change",t[14]),p=!0)},p(t,e){1&e&&c!==(c=t[24])&&(n.__value=c,n.value=n.__value),4&e&&(n.checked=~t[2].indexOf(n.__value)),1&e&&v!==(v=t[24]+"")&&_(r,v)},d(c){c&&i(e),t[15][1].splice(t[15][1].indexOf(n),1),p=!1,m()}}}function Z(t){let e,n,c,o,r,u,p,m,v=t[21]+"";return{c(){e=a("label"),n=a("input"),o=f(),r=h(v),u=f(),g(n,"type","checkbox"),n.__value=c=t[21],n.value=n.__value,t[15][0].push(n)},m(c,i){l(c,e,i),s(e,n),n.checked=~t[3].indexOf(n.__value),s(e,o),s(e,r),s(e,u),p||(m=d(n,"change",t[16]),p=!0)},p(t,e){2&e&&c!==(c=t[21])&&(n.__value=c,n.value=n.__value),8&e&&(n.checked=~t[3].indexOf(n.__value)),2&e&&v!==(v=t[21]+"")&&_(r,v)},d(c){c&&i(e),t[15][0].splice(t[15][0].indexOf(n),1),p=!1,m()}}}function tt(t){let e,n,o,r,m,_,$,b,k,w,x,y,S,A,O,q,C,E,j,N,J,B,D,I,P,R,U,H,F,G,K,V,tt,et,nt,ct,ot=t[0],rt=[];for(let e=0;e<ot.length;e+=1)rt[e]=Y(X(t,ot,e));let st=t[1],lt=[];for(let e=0;e<st.length;e+=1)lt[e]=Z(W(t,st,e));return tt=new Q({props:{questions:t[4]}}),{c(){e=a("main"),n=a("h1"),n.textContent="二階國考題庫",o=f(),r=a("form"),m=a("div");for(let t=0;t<rt.length;t+=1)rt[t].c();_=f(),$=a("div");for(let t=0;t<lt.length;t+=1)lt[t].c();var t;b=f(),k=a("button"),k.textContent="Start",w=f(),x=a("label"),y=a("input"),S=h("\n      隨機排序題目"),A=f(),O=a("label"),q=a("input"),C=h("\n      隨機排序答案"),E=f(),j=a("button"),j.textContent="Clear All On Page Answer",N=f(),J=a("button"),J.textContent="Clear All Answer",B=f(),D=a("details"),I=a("summary"),I.textContent="Append/Export JSON",P=f(),R=a("button"),R.textContent="Download JSON",U=f(),H=a("div"),F=a("input"),G=f(),K=a("button"),K.textContent="Append JSON",V=f(),(t=tt.$$.fragment)&&t.c(),g(n,"class","svelte-1320eoh"),g(m,"class","tags-list svelte-1320eoh"),g($,"class","session-list"),g(k,"type","submit"),g(k,"class","svelte-1320eoh"),g(y,"type","checkbox"),g(q,"type","checkbox"),g(j,"class","svelte-1320eoh"),g(J,"class","svelte-1320eoh"),g(R,"class","svelte-1320eoh"),g(F,"type","textarea"),g(K,"class","svelte-1320eoh"),g(D,"class","svelte-1320eoh"),g(r,"class","question-selection svelte-1320eoh"),g(e,"class","svelte-1320eoh")},m(c,i){l(c,e,i),s(e,n),s(e,o),s(e,r),s(r,m);for(let t=0;t<rt.length;t+=1)rt[t].m(m,null);s(r,_),s(r,$);for(let t=0;t<lt.length;t+=1)lt[t].m($,null);s(r,b),s(r,k),s(r,w),s(r,x),s(x,y),y.checked=t[5],s(x,S),s(r,A),s(r,O),s(O,q),q.checked=t[6],s(O,C),s(r,E),s(r,j),s(r,N),s(r,J),s(r,B),s(r,D),s(D,I),s(D,P),s(D,R),s(D,U),s(D,H),s(H,F),v(F,t[7]),s(H,G),s(H,K),s(e,V),z(tt,e,null),et=!0,nt||(ct=[d(y,"change",t[17]),d(q,"change",t[18]),d(j,"click",p(t[11])),d(J,"click",p(t[12])),d(R,"click",p(t[9])),d(F,"input",t[19]),d(K,"click",p(t[10])),d(r,"submit",p(t[8]))],nt=!0)},p(t,[e]){if(5&e){let n;for(ot=t[0],n=0;n<ot.length;n+=1){const c=X(t,ot,n);rt[n]?rt[n].p(c,e):(rt[n]=Y(c),rt[n].c(),rt[n].m(m,null))}for(;n<rt.length;n+=1)rt[n].d(1);rt.length=ot.length}if(10&e){let n;for(st=t[1],n=0;n<st.length;n+=1){const c=W(t,st,n);lt[n]?lt[n].p(c,e):(lt[n]=Z(c),lt[n].c(),lt[n].m($,null))}for(;n<lt.length;n+=1)lt[n].d(1);lt.length=st.length}32&e&&(y.checked=t[5]),64&e&&(q.checked=t[6]),128&e&&v(F,t[7]);const n={};16&e&&(n.questions=t[4]),tt.$set(n)},i(t){et||(M(tt.$$.fragment,t),et=!0)},o(t){!function(t,e,n,c){if(t&&t.o){if(L.has(t))return;L.add(t),(void 0).c.push((()=>{L.delete(t),c&&(n&&t.d(1),c())})),t.o(e)}}(tt.$$.fragment,t),et=!1},d(t){t&&i(e),u(rt,t),u(lt,t),T(tt),nt=!1,c(ct)}}}function et(t,e,n){let c,o,r=[],s=[],l=[],i=[],u=!1,a=!1;fetch("./qbank.json").then((t=>t.json())).then((function(t){n(13,r=t),r.map((function(t){t.tagString=t.subject}))}));let h="";const f=[[],[]];return t.$$.update=()=>{8192&t.$$.dirty&&n(0,c=[...new Set(r.map((t=>t.tagString.split(" "))).flat())]),8192&t.$$.dirty&&n(1,o=[...new Set(r.map((t=>t.session)))])},[c,o,s,l,i,u,a,h,function(){n(4,i=function(t){const{tagsSelected:e,sessionsSelected:n}=t;return console.log(`tags (${e})`),console.log(`sessions (${n})`),r.filter((t=>e.some((e=>t.tagString.includes(e))))).filter((t=>n.includes(t.session))).sort(((t,e)=>parseInt(t.no)>parseInt(e.no)))}({tagsSelected:s,sessionsSelected:l})),u&&V(i),n(4,i=i.map((t=>(t.choicesOrder=[...Array(t.choices.length).keys()],a&&V(t.choicesOrder),t))))},function(){let t=JSON.parse(JSON.stringify(r));t=t.map((function(t){return delete t.subject,delete t.currentAnswer,delete t.choicesOrder,t})),t=t.map((function(t){return t.tagString=t.tagString.toLowerCase(),t})),function(t,e){const n=new Blob([e],{type:"text/json"}),c=document.createElement("a");c.download=t,c.href=window.URL.createObjectURL(n),c.dataset.downloadurl=["text/json",c.download,c.href].join(":");const o=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0});c.dispatchEvent(o),c.remove()}("qbank.json",JSON.stringify(t))},function(){let t=JSON.parse(h);t.map((function(t){t.tagString=t.subject})),n(13,r=r.concat(t))},function(){i.map((function(t){"currentAnswer"in t&&delete t.currentAnswer})),n(4,i)},function(){r.map((function(t){"currentAnswer"in t&&delete t.currentAnswer})),n(13,r),n(4,i)},r,function(){s=m(f[1],this.__value,this.checked),n(2,s)},f,function(){l=m(f[0],this.__value,this.checked),n(3,l)},function(){u=this.checked,n(5,u)},function(){a=this.checked,n(6,a)},function(){h=this.value,n(7,h)}]}return new class extends I{constructor(t){super(),D(this,t,et,tt,r,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
