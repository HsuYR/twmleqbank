var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function c(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function r(t,e){t.appendChild(e)}function s(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function i(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function f(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function h(){return a(" ")}function d(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function p(t){return function(e){return e.preventDefault(),t.call(this,e)}}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e,n){const o=new Set;for(let e=0;e<t.length;e+=1)t[e].checked&&o.add(t[e].__value);return n||o.delete(e),Array.from(o)}function _(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}let v;function $(t){v=t}function b(){if(!v)throw new Error("Function called outside component initialization");return v}const k=[],x=[],y=[],w=[],j=Promise.resolve();let q=!1;function O(t){y.push(t)}let E=!1;const C=new Set;function S(){if(!E){E=!0;do{for(let t=0;t<k.length;t+=1){const e=k[t];$(e),A(e.$$)}for($(null),k.length=0;x.length;)x.pop()();for(let t=0;t<y.length;t+=1){const e=y[t];C.has(e)||(C.add(e),e())}y.length=0}while(k.length);for(;w.length;)w.pop()();q=!1,E=!1,C.clear()}}function A(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(O)}}const N=new Set;let M;function J(t,e){t&&t.i&&(N.delete(t),t.i(e))}function L(t,e,n,o){if(t&&t.o){if(N.has(t))return;N.add(t),M.c.push((()=>{N.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function P(t,e){const n=e.token={};function c(t,c,l,r){if(e.token!==n)return;e.resolved=r;let s=e.ctx;void 0!==l&&(s=s.slice(),s[l]=r);const u=t&&(e.current=t)(s);let i=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==c&&t&&(M={r:0,c:[],p:M},L(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),M.r||o(M.c),M=M.p)})):e.block.d(1),u.c(),J(u,1),u.m(e.mount(),e.anchor),i=!0),e.block=u,e.blocks&&(e.blocks[c]=u),i&&S()}if((l=t)&&"object"==typeof l&&"function"==typeof l.then){const n=b();if(t.then((t=>{$(n),c(e.then,1,e.value,t),$(null)}),(t=>{if($(n),c(e.catch,2,e.error,t),$(null),!e.hasCatch)throw t})),e.current!==e.pending)return c(e.pending,0),!0}else{if(e.current!==e.then)return c(e.then,1,e.value,t),!0;e.resolved=t}var l}function T(t,n,l,r){const{fragment:s,on_mount:u,on_destroy:i,after_update:f}=t.$$;s&&s.m(n,l),r||O((()=>{const n=u.map(e).filter(c);i?i.push(...n):o(n),t.$$.on_mount=[]})),f.forEach(O)}function z(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function B(t,e){-1===t.$$.dirty[0]&&(k.push(t),q||(q=!0,j.then(S)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function D(e,c,l,r,s,i,f=[-1]){const a=v;$(e);const h=e.$$={fragment:null,ctx:null,props:i,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:c.context||[]),callbacks:n(),dirty:f,skip_bound:!1};let d=!1;if(h.ctx=l?l(e,c.props||{},((t,n,...o)=>{const c=o.length?o[0]:n;return h.ctx&&s(h.ctx[t],h.ctx[t]=c)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](c),d&&B(e,t)),n})):[],h.update(),d=!0,o(h.before_update),h.fragment=!!r&&r(h.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);h.fragment&&h.fragment.l(t),t.forEach(u)}else h.fragment&&h.fragment.c();c.intro&&J(e.$$.fragment),T(e,c.target,c.anchor,c.customElement),S()}$(a)}class F{$destroy(){z(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function G(t){for(var e,n,o=t.length;0!==o;)n=Math.floor(Math.random()*o),e=t[o-=1],t[o]=t[n],t[n]=e;return t}function H(t){return Promise.all(t.map((t=>fetch("qbank/"+t+".json").then((t=>t.json()))))).then((t=>{let e=t.flat();return{subjects:e.map((t=>t.subject)).filter(((t,e,n)=>n.indexOf(t)===e)),sessions:e.map((t=>t.session)).filter(((t,e,n)=>n.indexOf(t)===e)).sort(),query_question:function(t,n,o=!0){console.log(`subjects (${t})`),console.log(`sessions (${n})`);let c=e.filter((e=>t.includes(e.subject))).filter((t=>n.includes(t.session)));return c=JSON.parse(JSON.stringify(c)),o&&(G(c),c.map((t=>{G(t.choices)}))),console.log(c),c}}}))}function I(t,e,n){const o=t.slice();return o[8]=e[n],o[9]=e,o[10]=n,o}function K(t,e,n){const o=t.slice();return o[11]=e[n],o[13]=n,o}function Q(t){let e,n;return{c(){e=f("img"),e.src!==(n=t[8].img_link)&&g(e,"src",n),g(e,"alt","無法顯示圖片"),g(e,"class","svelte-fa22vv")},m(t,n){s(t,e,n)},p(t,o){1&o&&e.src!==(n=t[8].img_link)&&g(e,"src",n)},d(t){t&&u(e)}}}function R(t){let e,n,c,l,i,p,m,v=t[11].text+"";function $(){t[5].call(n,t[9],t[10])}function b(){return t[7](t[8],t[9],t[10])}return t[6][0][t[10]]=[],{c(){e=f("label"),n=f("input"),c=h(),l=a(v),g(n,"type","radio"),n.__value=t[13],n.value=n.__value,t[6][0][t[10]].push(n),g(e,"class",i=t[8].showing+" "+(t[11].is_correct?"correct":"incorrect")+" svelte-fa22vv")},m(o,u){s(o,e,u),r(e,n),n.checked=n.__value===t[8].current_answer,r(e,c),r(e,l),p||(m=[d(n,"change",$),d(e,"click",b)],p=!0)},p(o,c){t=o,1&c&&(n.checked=n.__value===t[8].current_answer),1&c&&v!==(v=t[11].text+"")&&_(l,v),1&c&&i!==(i=t[8].showing+" "+(t[11].is_correct?"correct":"incorrect")+" svelte-fa22vv")&&g(e,"class",i)},d(c){c&&u(e),t[6][0][t[10]].splice(t[6][0][t[10]].indexOf(n),1),p=!1,o(m)}}}function U(t){let e,n,o,c,l,d,p,m,v,$,b,k,x=t[8].session+"",y=t[8].no+"",w=t[8].question+"",j=t[8].img_link&&Q(t),q=t[8].choices,O=[];for(let e=0;e<q.length;e+=1)O[e]=R(K(t,q,e));return{c(){e=f("div"),n=f("p"),o=a(x),c=a(" 第"),l=a(y),d=a("題"),p=h(),m=f("p"),v=a(w),$=h(),j&&j.c(),b=h();for(let t=0;t<O.length;t+=1)O[t].c();k=h(),g(e,"class","svelte-fa22vv")},m(t,u){s(t,e,u),r(e,n),r(n,o),r(n,c),r(n,l),r(n,d),r(e,p),r(e,m),r(m,v),r(e,$),j&&j.m(e,null),r(e,b);for(let t=0;t<O.length;t+=1)O[t].m(e,null);r(e,k)},p(t,n){if(1&n&&x!==(x=t[8].session+"")&&_(o,x),1&n&&y!==(y=t[8].no+"")&&_(l,y),1&n&&w!==(w=t[8].question+"")&&_(v,w),t[8].img_link?j?j.p(t,n):(j=Q(t),j.c(),j.m(e,b)):j&&(j.d(1),j=null),1&n){let o;for(q=t[8].choices,o=0;o<q.length;o+=1){const c=K(t,q,o);O[o]?O[o].p(c,n):(O[o]=R(c),O[o].c(),O[o].m(e,k))}for(;o<O.length;o+=1)O[o].d(1);O.length=q.length}},d(t){t&&u(e),j&&j.d(),i(O,t)}}}function V(e){let n,o,c,l,g,m,v,$,b,k,x,y,w,j,q,O=e[0].length+"",E=e[0],C=[];for(let t=0;t<E.length;t+=1)C[t]=U(I(e,E,t));return{c(){n=f("main"),o=f("form"),c=f("p"),l=a("共"),g=a(O),m=a("題，已作答"),v=a(e[1]),$=a("題，答對"),b=a(e[2]),k=a(" ("),x=a(e[3]),y=a("%)"),w=h();for(let t=0;t<C.length;t+=1)C[t].c()},m(t,u){s(t,n,u),r(n,o),r(o,c),r(c,l),r(c,g),r(c,m),r(c,v),r(c,$),r(c,b),r(c,k),r(c,x),r(c,y),r(o,w);for(let t=0;t<C.length;t+=1)C[t].m(o,null);j||(q=d(o,"submit",p(e[4])),j=!0)},p(t,[e]){if(1&e&&O!==(O=t[0].length+"")&&_(g,O),2&e&&_(v,t[1]),4&e&&_(b,t[2]),8&e&&_(x,t[3]),1&e){let n;for(E=t[0],n=0;n<E.length;n+=1){const c=I(t,E,n);C[n]?C[n].p(c,e):(C[n]=U(c),C[n].c(),C[n].m(o,null))}for(;n<C.length;n+=1)C[n].d(1);C.length=E.length}},i:t,o:t,d(t){t&&u(n),i(C,t),j=!1,q()}}}function W(t,e,n){let o,c,l,{questions:r}=e;return t.$$set=t=>{"questions"in t&&n(0,r=t.questions)},t.$$.update=()=>{1&t.$$.dirty&&n(1,o=r.filter((t=>"showing"==t.showing)).length),1&t.$$.dirty&&n(2,c=r.filter((t=>void 0!==t.current_answer&&t.choices[t.current_answer].is_correct)).length),6&t.$$.dirty&&n(3,l=0==o?0:Math.round(100*c/o))},[r,o,c,l,function(e){!function(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t(e)))}(t,e)},function(t,e){t[e].current_answer=this.__value,n(0,r)},[[]],(t,e,o)=>{n(0,e[o].showing="showing",r)}]}class X extends F{constructor(t){super(),D(this,t,W,V,l,{questions:0})}}function Y(t,e,n){const o=t.slice();return o[11]=e[n],o}function Z(t,e,n){const o=t.slice();return o[14]=e[n],o}function tt(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function et(t){let e,n,o,c,l,a,m,_,v,$,b,k=t[0],x=[];for(let e=0;e<k.length;e+=1)x[e]=nt(Z(t,k,e));let y=t[1],w=[];for(let e=0;e<y.length;e+=1)w[e]=ot(Y(t,y,e));return _=new X({props:{questions:t[4]}}),{c(){e=f("form"),n=f("div");for(let t=0;t<x.length;t+=1)x[t].c();o=h(),c=f("div");for(let t=0;t<w.length;t+=1)w[t].c();var t;l=h(),a=f("button"),a.textContent="Submit",m=h(),(t=_.$$.fragment)&&t.c(),g(n,"class","subject_selection svelte-kj8am1"),g(c,"class","session_selection svelte-kj8am1"),g(a,"type","submit"),g(a,"class","svelte-kj8am1"),g(e,"class","question_selection svelte-kj8am1")},m(u,i){s(u,e,i),r(e,n);for(let t=0;t<x.length;t+=1)x[t].m(n,null);r(e,o),r(e,c);for(let t=0;t<w.length;t+=1)w[t].m(c,null);r(e,l),r(e,a),s(u,m,i),T(_,u,i),v=!0,$||(b=d(e,"submit",p(t[5])),$=!0)},p(t,e){if(5&e){let o;for(k=t[0],o=0;o<k.length;o+=1){const c=Z(t,k,o);x[o]?x[o].p(c,e):(x[o]=nt(c),x[o].c(),x[o].m(n,null))}for(;o<x.length;o+=1)x[o].d(1);x.length=k.length}if(10&e){let n;for(y=t[1],n=0;n<y.length;n+=1){const o=Y(t,y,n);w[n]?w[n].p(o,e):(w[n]=ot(o),w[n].c(),w[n].m(c,null))}for(;n<w.length;n+=1)w[n].d(1);w.length=y.length}const o={};16&e&&(o.questions=t[4]),_.$set(o)},i(t){v||(J(_.$$.fragment,t),v=!0)},o(t){L(_.$$.fragment,t),v=!1},d(t){t&&u(e),i(x,t),i(w,t),t&&u(m),z(_,t),$=!1,b()}}}function nt(t){let e,n,o,c,l,i,p,m,v=t[14]+"";return{c(){e=f("label"),n=f("input"),c=h(),l=a(v),i=h(),g(n,"type","checkbox"),n.__value=o=t[14],n.value=n.__value,t[7][1].push(n)},m(o,u){s(o,e,u),r(e,n),n.checked=~t[2].indexOf(n.__value),r(e,c),r(e,l),r(e,i),p||(m=d(n,"change",t[6]),p=!0)},p(t,e){1&e&&o!==(o=t[14])&&(n.__value=o,n.value=n.__value),4&e&&(n.checked=~t[2].indexOf(n.__value)),1&e&&v!==(v=t[14]+"")&&_(l,v)},d(o){o&&u(e),t[7][1].splice(t[7][1].indexOf(n),1),p=!1,m()}}}function ot(t){let e,n,o,c,l,i,p,m,v=t[11]+"";return{c(){e=f("label"),n=f("input"),c=h(),l=a(v),i=h(),g(n,"type","checkbox"),n.__value=o=t[11],n.value=n.__value,t[7][0].push(n)},m(o,u){s(o,e,u),r(e,n),n.checked=~t[3].indexOf(n.__value),r(e,c),r(e,l),r(e,i),p||(m=d(n,"change",t[8]),p=!0)},p(t,e){2&e&&o!==(o=t[11])&&(n.__value=o,n.value=n.__value),8&e&&(n.checked=~t[3].indexOf(n.__value)),2&e&&v!==(v=t[11]+"")&&_(l,v)},d(o){o&&u(e),t[7][0].splice(t[7][0].indexOf(n),1),p=!1,m()}}}function ct(e){let n;return{c(){n=f("p"),n.textContent="正在載入題庫..."},m(t,e){s(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}function lt(t){let e,n,o,c,l={ctx:t,current:null,token:null,hasCatch:!1,pending:ct,then:et,catch:tt,blocks:[,,,]};return P(H,l),{c(){e=f("main"),n=f("h1"),n.textContent="二階國考題庫",o=h(),l.block.c(),g(n,"class","svelte-kj8am1"),g(e,"class","svelte-kj8am1")},m(t,u){s(t,e,u),r(e,n),r(e,o),l.block.m(e,l.anchor=null),l.mount=()=>e,l.anchor=null,c=!0},p(e,[n]){!function(t,e,n){const o=e.slice(),{resolved:c}=t;t.current===t.then&&(o[t.value]=c),t.current===t.catch&&(o[t.error]=c),t.block.p(o,n)}(l,t=e,n)},i(t){c||(J(l.block),c=!0)},o(t){for(let t=0;t<3;t+=1){L(l.blocks[t])}c=!1},d(t){t&&u(e),l.block.d(),l.token=null,l=null}}}function rt(t,e,n){let o,c=[],l=[],r=[],s=[],u=[];H(["心臟內科","胸腔內科","胃腸肝膽科","腎臟科","免疫風濕科","血液科","腫瘤科","感染科","新陳代謝科","家庭醫學科","醫學倫理","產科","婦女生殖內分泌","內分泌及乳房外科","皮膚科"]).then((t=>{n(0,c=t.subjects),n(1,l=t.sessions),o=t.query_question}));const i=[[],[]];return[c,l,r,s,u,function(){n(4,u=o(r,s))},function(){r=m(i[1],this.__value,this.checked),n(2,r)},i,function(){s=m(i[0],this.__value,this.checked),n(3,s)}]}return new class extends F{constructor(t){super(),D(this,t,rt,lt,l,{})}}({target:document.body,props:{}})}();
//# sourceMappingURL=bundle.js.map
